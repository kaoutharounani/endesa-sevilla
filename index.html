<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa de Oficinas Endesa - Sevilla</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            display: flex;
            flex-direction: column;
            height: 100vh; /* Ocupa toda la altura de la pantalla */
        }
        header {
            background-color: #0055ff;
            color: white;
            text-align: center;
            padding: 1rem 0;
            flex-shrink: 0;
        }
        .main-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        /* Estilos del panel lateral (listado) */
        #sidebar {
            width: 350px;
            background-color: white;
            overflow-y: auto; /* Permite hacer scroll si hay muchas oficinas */
            border-right: 1px solid #ccc;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
            z-index: 1000;
        }
        .office-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .office-item:hover {
            background-color: #f0f5ff; /* Color azul clarito al pasar el rat√≥n */
        }
        .office-item h3 {
            margin: 0 0 5px 0;
            color: #0055ff;
            font-size: 15px;
        }
        .office-item p {
            margin: 0;
            font-size: 13px;
            color: #555;
        }
        /* Estilos del mapa */
        #map {
            flex: 1; /* Ocupa el resto del espacio disponible */
            width: 100%;
        }
        /* Estilos de la ventana emergente en el mapa */
        .popup-content h3 {
            margin: 0 0 5px 0;
            color: #0055ff;
            font-size: 16px;
        }
        .popup-content p {
            margin: 5px 0;
            font-size: 14px;
        }
        .btn-llegar {
            display: inline-block;
            margin-top: 10px;
            padding: 8px 12px;
            background-color: #34a853; 
            color: white !important;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            font-size: 13px;
        }
        .btn-llegar:hover {
            background-color: #2b8c45;
        }

        /* Dise√±o para m√≥viles: listado debajo del mapa */
        @media (max-width: 768px) {
            .main-container {
                flex-direction: column;
            }
            #sidebar {
                width: 100%;
                height: 40%; /* El listado ocupa el 40% de la pantalla abajo */
                border-right: none;
                border-top: 1px solid #ccc;
            }
            #map {
                height: 60%;
            }
        }
    </style>
</head>
<body>

    <header>
        <h2>Oficinas de Endesa en Sevilla</h2>
    </header>

    <div class="main-container">
        <div id="sidebar"></div>
        
        <div id="map"></div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <script>
        // 1. Inicializar el mapa centrado en Sevilla
        const map = L.map('map').setView([37.3886, -5.9823], 13);

        // 2. Cargar los "tiles" (mapa base) de OpenStreetMap
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '¬© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        // 3. Datos de las oficinas
        const oficinas = [
            {
                nombre: "Automatismos Raci ‚ö°üöô‚òÄÔ∏è",
                direccion: "Calle Estrella Canopus, 25, 41015, Sevilla",
                horario: "L‚ÄëJ 9:00‚Äë14:00 y 16:00‚Äë19:00<br>V 9:00‚Äë14:00 y 16:00‚Äë18:00<br>S-D cerrado",
                lat: 37.4172, lng: -5.9559
            },
            {
                nombre: "Concentra ‚ö°üöô‚òÄÔ∏è",
                direccion: "Avenida M√°laga, 4, 41004, Sevilla",
                horario: "L‚ÄëJ 9:00‚Äë14:00 y 16:00‚Äë19:00<br>V 9:00‚Äë14:00 y 16:00‚Äë19:00<br>S-D cerrado",
                lat: 37.3820, lng: -5.9839
            },
            {
                nombre: "Energuia Web ‚ö°üöô",
                direccion: "Calle Bami, 11, 41013, Sevilla",
                horario: "L‚ÄëV 8:00‚Äë18:00<br>S-D cerrado",
                lat: 37.3592, lng: -5.9818
            },
            {
                nombre: "Eurocontrol Global De Energia ‚ö°üöô‚òÄÔ∏è",
                direccion: "Avenida Hytasa, 69, 41006, Sevilla",
                horario: "L‚ÄëJ 8:30‚Äë17:00<br>V 8:30‚Äë14:30<br>S-D cerrado",
                lat: 37.3698, lng: -5.9610
            },
            {
                nombre: "Servienergia ‚ö°üöô‚òÄÔ∏è",
                direccion: "Calle Arroyo, 49, 41008, Sevilla",
                horario: "L‚ÄëJ 8:00‚Äë18:00<br>V 8:00‚Äë15:00<br>S-D cerrado",
                lat: 37.3941, lng: -5.9760
            },
            {
                nombre: "Servinform ‚ö°üöô",
                direccion: "Avenida Rep√∫blica Argentina, 40, 41011, Sevilla",
                horario: "L‚ÄëJ 8:00‚Äë18:00<br>V 8:00‚Äë16:00<br>S-D cerrado",
                lat: 37.3776, lng: -6.0028
            },
            {
                nombre: "Endesa Sevilla ‚ö°üöô‚òÄÔ∏è",
                direccion: "Avenida Luis de Morales, 32, 41018, Sevilla",
                horario: "L‚ÄëV 8:00‚Äë18:00<br>S-D cerrado",
                lat: 37.3825, lng: -5.9754
            }
        ];

        const sidebar = document.getElementById('sidebar');

        // 4. Recorrer los datos para crear los marcadores y el listado
        oficinas.forEach(oficina => {
            // URL de ruta de Google Maps
            const googleMapsUrl = `https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(oficina.direccion)}`;

            // Contenido del bocadillo del mapa
            const popupContent = `
                <div class="popup-content">
                    <h3>${oficina.nombre}</h3>
                    <p><strong>üìç Ubicaci√≥n:</strong> ${oficina.direccion}</p>
                    <p><strong>üïí Horario:</strong><br>${oficina.horario}</p>
                    <a href="${googleMapsUrl}" target="_blank" class="btn-llegar">üöó C√≥mo llegar</a>
                </div>
            `;

            // Crear el marcador y a√±adirlo al mapa
            const marker = L.marker([oficina.lat, oficina.lng])
                .addTo(map)
                .bindPopup(popupContent);

            // Crear el elemento de la lista para la barra lateral
            const divItem = document.createElement('div');
            divItem.className = 'office-item';
            divItem.innerHTML = `
                <h3>${oficina.nombre}</h3>
                <p>${oficina.direccion}</p>
            `;

            // Hacer que al hacer clic en la lista, el mapa se mueva y abra el popup
            divItem.addEventListener('click', () => {
                // Centrar el mapa en la oficina con un poco de zoom (nivel 15)
                map.setView([oficina.lat, oficina.lng], 15);
                // Abrir la ventanita del marcador
                marker.openPopup();
            });

            // A√±adir el elemento al contenedor del listado
            sidebar.appendChild(divItem);
        });
    </script>
</body>
</html>
